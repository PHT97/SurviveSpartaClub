# 스파르타 코딩틀럽에서 살아남기
'닷지'의 탄막피하기와 '아이작의 번제'의 스테이지개념, '엔터더 건전'의 전투시스템을 합쳐 제작한 게임

## 프로젝트 설명
'닷지'처럼 하나의 스테이지에서 게임이 진행되는것이 아닌 다양한 스테이지에서 게임을 진행하면 플레이어의 몰입도와 만족도를 높일수 있다고 생각해 게임을 제작하게되었다.

## 개발기간
23년 1월 24일 ~ 1월 31일

### 멤버구성
팀장 - 박희태(11번가 대장) : 게임로직 구성 / 적 기본 로직 / UI 시스템 제작<br/>
조원 - 염고운(개그맨)      : 스타트 씬 / 엔딩 씬 / 캐릭터 선택 기능 / 튜터 방문 담당<br/>
조원 - 김준하(그래픽담당)   : 게임 비주얼 / 적 구체화 / 사운드 / 충돌감지 담당<br/>

### 개발 환경
* 유니티 에디터 버젼 2022.3.2f1

### 와이어 프레임
![플로우](https://github.com/PHT97/SurviveSpartaClub/assets/101238896/8f2600c1-b695-4bcb-a502-9e8aeead9d55)

게임의 난이도는 챌린지, 스탠다드, 베이직 3단계가 있으며 난이도별 스테이지가 각각 5개씩 존재한다.<br/>
스테이지를 클리어하면 난이도중 한곳을 선택해 게임을 진행하게 되고 총 5개의 스테이지를 클리어하면 보스룸이 등장, 보스를 처치하면 엔딩을 볼 수 있다.<br/>

### 주요기능
* 플레이어 UI
플레이어의 체력, 몬스터의 남은 무적시간 카운트, 클리어한 던전개수 표시<br/>
플레이어는 선택한 캐릭터를 조작하게 되며 탄환을 발사해 적을 물리치며 나아간다.<br/>

* 게임오버
게임오버 텍스트와 함께 RETRY, EXIT 버튼 활성화<br/>
RETRY시 해당스테이지에서 재시작, EXIT시 StartScene으로 돌아간다.

* 적 기믹 소개
적이 10초간 무적상태를 가지며 플레이어에게 공격을 진행한다.<br/>
플레이어는 무적상태가 끝날 때 까지 적의 공격을 피하고 무적상태가 해제되면 모든 적을 물리쳐 다음 스테이지로 나아간다.

* 적 종류<br/>
  1. ANGRY DOG<br/>
  사전캠프 3주차의 주인공<br/>
  느린 탄막 형성형 적, 플레이어의 무빙을 억제하는것이 목표

  2. BAD RTAN<br/>
  1주차 카드 뒤집기 게임의 주인공<br/>
  정확도 높은 사격형 적, 플레이어의 무빙을 유도한다.

  3. GIT HUB<br/>
  컨플릭트의 악마<br/>
  강화된 탄막 형성형 적, 많은수의 탄을 던져 플레이어의 무빙을 억제

  4. ALGORITHM<br/>
  강회된 정확도 사격형 적, 플레이어의 빠른 무빙을 유도

  5. 고통의 메아리_보스<br/>
  1기생의 최종 프로젝트<br/>
  자아를 가지고 플레이어를 뒤쫒아온다.

### 트러블 슈팅
1. Raycast 이슈<br/>
Raycast함수를 사용할 때 몬스터내부에서 Raycast를 발사해 플레이어를 찾아서 반환하도록 만들예정이었다.<br/>
그러나 플레이어를 찾아오는것이 아닌 제일먼저 맞는 것을 반환하도록 설정되어있어 몬스터 자신을 반환하는 상황이 발생했다.<br/>
Raycast함수에 의해 충돌체크가 되는 객체가 1개여서 발생하는 문제.<br/>
해결하기 위해 레이어마스크를 Player레이어로 지정해 해당 레이어만 감지해서 반환하도록만들어 해당 문제를 해결.

2. ObjectPool<br/>
ObjectPool에서 탄환을 생성하고 다음씬으로 넘어가면 탄환생성이 안되어 공격이 불가능한 문제.<br/>
게임시작시 awake로 모든탄환을 생성해뒀는데 씬을 넘어가면 다시 awake가 동작하지 않아 탄환이 재생성되지않았던 문제였다.<br/>
해결하기위해 awake에 있던 코드를 스크립트전체에서 사용할수있도록 함수로 제작해 미리 탄환을 생성해 두고 Linq를 사용해 리스트에 넣어둔 탄환들중 원하는 것들을 태그로 찾아서 가져오는 방식으로 해결.

3. 씬 변경 캐릭터 저장<br/>
씬 변경할 때 입력한 닉네임 가져오는것과 선택한 캐릭터를 플레이어블 캐릭터로 설정 하는 것들이 씬이 변경되어도 저장되어있어야 해서 구현하는데 어려웠다.

4. 캐릭터 크기 변경<br/>
캐릭터 선택창에서 캐릭터 변경후 캐릭터 크기 작아지는문제가 있었다.<br/>
게임창을 키우면 게임크기가 변경되고 UI 스케일 모드를 변경할 때 크기가 자동으로 맞춰지다보니 작아졌던 문제.<br/>
플레이어프리팹을 사용해 해결

5. 현실적인 작업과 시간 관리<br/>
맵 랜덤 생성기능을 구현해 보려다가 실패해서 시간을 많이 소모한 나머지 실제 구현된 맵은 전부 프리메이드 맵이 되었고 그로 인해 초기 구상 로직이 꼬여 작업이 힘들어 졌다.<br/>
다음 프로젝트때는 시간 관리를 좀더 잘 해야겠다는 생각이 들었다. <br/>
비쥬얼 적으로도 2D에서 물건을 가리고 또한 가려지는 원근감을 표현하려고 여러가지 방법을 시도.<br/>
레이어로 세분해서 구분해보는 방법도 해보고 여러가지 해보았지만 프로젝트 셋팅에서 그래픽 세팅, 트랜스페런시 솔트 옵션을 z축 기준이 아닌 y축 기준으로 하니 생각보다 단순하게 해결.

 6. 코드병합 문제<br/>
적이 유저의 타겟팅을 잃었을 때 타겟팅을 재시도하지 않고 공격을 멈추는 현상이 발생.<br/>
플레이어의 레이어를 변경해 높낮이를 구현하려고 했던 코드와 플레이어 레이어를 player로 고정해 적이 찾을수 있도록 구현한 코드가 충돌해 발생했던 문제.<br/>
플레이어 레이어를 변경하는 코드를 삭제함으로써 해결하였으나 높낮이를 구별하는 기능이 구현불가능해지는 아쉬운 결과가 발생.

### 한줄평<br/>
박희태 – 게임로직의 중요성을 알게되었던 프로젝트였습니다. 시간부족으로 여러 기능을 추가하지못해 아쉬웠습니다.<br/>
염고은 - 이번 팀프로젝트를 하면서 팀원의 포용력이 더 으쌰으쌰하는 분위기를 만들어준거같다 한분한분 감사하고 다음번에도 같이하고싶은 분들이었다.<br/>
김준하 – 하루종일 버그테스트 하다 보스까지 노히트런
